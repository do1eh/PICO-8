pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
text_init()
write_init()
intro=true
end

function _update()

end

function _draw()
cls()
if intro then
    intro_draw()
end    

end
-->8
-- Intro
function write_init()
    
    char_index = 0
    frame_counter = 0
    current_text = ""
    text_ready = false
    text_zeile += 1
    if text_zeile > #texte then
        intro=false
        return
    else
      text=texte[text_zeile]
    end
end

function text_init()
    texte={"hi, ich bin guglielmo marconi"}
add(texte,"und ich versuche gerade,") 
add(texte,"drahtlos zu funken.")
add(texte,"ich hoffe, das klappt!")
add(texte,"heinrich hertz hat es") 
add(texte,"ja auch geschafft.")
add(texte,"er hat einen funken erzeugt und ")
add(texte,"konnte damit drahtlos strom")
add(texte,"uebertragen. ich will es")
add(texte,"jetzt auch versuchen!")
add(texte,"ich habe einen hochspannungs-")
add(texte,"generator, jede menge kabel") 
add(texte,"und zwei kugeln")
add(texte,"zwischen denen ich einen funken")
add(texte,"ueberspringen lassen will.")
add(texte,"auf der anderen seite habe ich") 
add(texte,"einen fritter.")
add(texte,"das ist eine mit metallspaenen") 
add(texte,"gefuellte glasroehre,die leitet")
add(texte,"wenn ein funksignal darauf")
add(texte,"trifft. daran ist eine klingel.")
add(texte,"wenn der funke ueberspringt,")
add(texte,"sollte die klingel laeuten.")
add(texte,"jetzt muss das ganze nur noch")
add(texte,"zusammengebaut werden.")
delay_frames = 2 -- Wie viele Frames auf einen Buchstaben gewartet wird
text_zeile = 0
end

function write(posx, posy)
    -- 1. wartezeit-logik:
    -- zaehle die frames hoch und beende die funktion, wenn die wartezeit nicht erreicht ist.
    frame_counter+=1
    if frame_counter >= delay_frames or frame_counter ==0 then
    frame_counter = 0
      if char_index < #text then
        char_index += 1
        current_text = sub(text, 1, char_index)
      else
        text_ready = true
        frame_counter = 0  
    end
    end
    -- 3. textausgabe:
    -- schneidet den string vom anfang bis zum aktuellen index ab.
    
    -- zeichne den aktuellen text auf den bildschirm
    print(current_text, posx, posy, 7) -- 7 ist eine helle farbe 
    
end

function wait(zeit,posx,posy)
 frame_counter+=1
 if frame_counter >= zeit then
    frame_counter = 0
    return true
 else
    print(current_text, posx, posy, 7)
    return false
 end
end

function intro_draw()
    if not text_ready then 
    write(2, 10)
else
    if wait(10,2,10) then
     write_init()
    end  
end

if frame_counter==0 then
   spr(2,34,20,1,2)
else
   spr(1,34,20,1,2)
end

end


-->8
--game
__gfx__
00000000055555000555550000555550005555500055555000000000000000000000000000000000000000000000000000000000000000000006600000000000
000000000c66c5000c66c50000c6665000c666500055555000000000000000000000000000005500005500000000550000550000000000000006600000000000
0070070006666600066666000066665000666650005555500000000000000000000000000000550cc05500000000550000550000000000000006600000000000
0007700006ee660006ee660000666650006666500055555000000000066666666666666066655550c55556666665555005555666666666666666600000000000
000770000777770007ee7700007777700077777000777770000000007666666aaa66666566655550055556666665555005555666666666666666600000000000
00700700117771101177711001111111011111110111111100000000766666aaa666666500005500005500000000550000550000000000000000000000000000
0000000011777110117771100111111101111111011111110000000076666aaa6666667500000000000000000000000000000000000000000000000000000000
000000001117111011171110111111111111111101111111000000007666aaa66666676500000000000000000000000000000000000000000000000000000000
00000000111711101117111011111111111111110111111100000000766aaaaaaa66666500000000000000000000000000000000000000000000000000000000
0000000011111110111111100111111101111111011111110000000076666aaaa666666500005500005500000777777777777770077777777777777000000000
0000000055555550555555500055555500055550055555550000000076666aaa6666666500005500005500000707777707707770077777777777777000000000
000000005555555055555550005555550005555005555555000000007666aaa66666666566655550055556666777707777777076670707070707070600000000
000000005550555055505550005500550005555005550555000000007666aa666666666566655550c55556666707777077777776607070707070707600000000
00000000550005505500055005500555005555500550005500000000766aa666676666650000550cc05500000777707770770770077777777777777000000000
0000000000000000000000000000000000000000000000000000000076aa66667666666500000000000000000777777777777770077777777777777000000000
00000000000000000000000000000000000000000000000000000000066666666666666000000000000000000000000000000000000000000000000000000000
00000000006666666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666888866666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666688888888666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666688888888666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666888888778866600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666888888878866600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666888888888866600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666888888888866600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666688888888666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666688888888666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666888866666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2424242400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001100030409090900000a17180a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000013140905060a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
